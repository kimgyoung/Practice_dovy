<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>제발</title>
</head>
<body>

<form id="joinForm" action="/kakaoJoin" method="post">
    <button type="submit">회원 가입 하기</button>
</form>
<button onclick="window.location.href='/'">돌아 가기</button>

<button id="kakao-logout-btn">카카오 로그아웃</button>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('joinForm');
        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            const response = await fetch('/kakaoJoin', {
                method: 'POST'
            });

            const result = await response.json();

            if (result.success) {
                alert("회원 가입 완료, 홈페이지로 돌아 갑니다");
                window.location.href = '/realChoco.html';
            } else {
                alert("Error: " + result.error.message);
            }
        });
        const kakaoLogoutBtn = document.getElementById('kakao-logout-btn');
        kakaoLogoutBtn.addEventListener('click', function() {
            window.location.href = '/logout.html';  // 로그아웃 페이지로 이동
        });
    });
</script>

</body>
</html>
